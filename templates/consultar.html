{% extends "base.html" %}

{% block content %}
<h1>Consultar Inventario</h1>

<form method="POST">
    <input type="text" name="nombre" placeholder="Buscar por nombre">

    <!-- Listbox de categorías -->
    <select name="categoria_id" size="5">
        <option value="">-- Todas las categorías --</option>
        {% for categoria in categorias %}
            <option value="{{ categoria.id }}" {% if categoria.id == categoria_id %}selected{% endif %}>
                {{ categoria.nombre }}
            </option>
        {% endfor %}
    </select>

    <button type="submit">Buscar</button>
</form>

{% if productos %}
<table border="1" cellpadding="5">
    <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Precio</th>
        <th>Stock</th>
        <th>Categoría</th>
    </tr>
    {% for producto in productos %}
    <tr>
        <td>{{ producto.id }}</td>
        <td>{{ producto.nombre }}</td>
        <td>{{ producto.precio }}</td>
        <td>{{ producto.stock }}</td>
        <td>{{ producto.categoria.nombre }}</td>
    </tr>
    {% endfor %}
</table>
{% endif %}
{% endblock %}
